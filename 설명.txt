ë‹¤ë¥¸ ì„œë²„ì™€ í†µì‹ ì„ í•˜ê¸° ìœ„í•œ API ë¥¼ ì„¤ê³„ ë° ê°œë°œì„ í•˜ë©´ì„œ ì•Œê²Œ ëœ

feignì— ëŒ€í•´ì„œ ì •ë¦¬í•˜ê¸° ìœ„í•´ ì‘ì„±í•˜ê²Œ ë˜ì—ˆë‹¤.

ê·¸ ì „ê¹Œì§€ëŠ” springì—ì„œ ë‹¤ë¥¸ ì„œë²„ë¥¼ í˜¸ì¶œí•´ë³¸ ì ì´ ì—†ì—ˆê¸° ë•Œë¬¸ì— ì–´ë–»ê²Œ í•˜ëŠ”ì§€ì— ëŒ€í•œ ê¶ê¸ˆì¦ì´ ìˆì—ˆëŠ”ë°

ì´ë²ˆ ê¸°íšŒì— ì•Œê²Œ ë  ìˆ˜ ìˆì—ˆë‹¤.

ğŸ¤·â€â™‚ï¸ feignì€ ê·¸ë˜ì„œ ë­”ë°!
 

- Netflixì—ì„œ ë§Œë“  HTTP client binderë¡œì„œ ê¸°ì¡´ http client ì‘ì„±ì„ ì‰½ê²Œ ë§Œë“¤ì–´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤.

 

- interfaceë¥¼ ì‘ì„±í•˜ê³  annotationì„ ë¶™ì—¬ì„œ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—,

HTTP APIë¥¼ ê· ì¼í•˜ê²Œ ë°”ì¸ë”©í•˜ì—¬ ë³µì¡ì„±ì„ ì¤„ì—¬ì¤€ë‹¤.

 

- ì´ì „ì—ëŠ” RestTemplate ë°©ì‹ê³¼ WebClient ë°©ì‹ì´ ì¡´ì¬í–ˆì§€ë§Œ

í˜„ì¬ ìŠ¤í”„ë§ ì»¤ë®¤ë‹ˆí‹°ì—ì„œëŠ” RestTemplateì‚¬ìš©ì„ ê¶Œì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.

 

ì•„ë˜ ê°„ë‹¨í•œ ì˜ˆì‹œë¥¼ í†µí•´ì„œ ê°„ë‹¨í•œ ì‚¬ìš©ë°©ë²•ì„ ì•Œë ¤ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

1. ì˜ì¡´ì„± ì¶”ê°€
- maven
<properties>
    <spring.cloud-version>Hoxton.SR8</spring.cloud-version>
</properties>
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.springframework.cloud</groupId>
            <artifactId>spring-cloud-dependencies</artifactId>
            <version>${spring.cloud-version}</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
    </dependencies>
</dependencyManagement>
 

- gradle
buildscript {
  dependencies {
    classpath "io.spring.gradle:dependency-management-plugin:1.0.10.RELEASE"
  }
}

ext {
  set('springCloudVersion', "Hoxton.SR8")
}


apply plugin: "io.spring.dependency-management"

dependencyManagement {
  imports {
    mavenBom "org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}"
  }
}



2. Application
@SpringBootApplication
@EnableFeignClients
public class Application {

    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }

}
@EnableFeignClients ì–´ë…¸í…Œì´ì…˜ì´ ì§€ì •ëœ packageë“¤ì„ ëŒì•„ë‹¤ë‹ˆë©´ì„œ @FeignClient ì–´ë…¸í…Œì´ì…˜ì„ ì°¾ì•„

êµ¬í˜„ì²´ë¥¼ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.

3. ì¸í„°í˜ì´ìŠ¤ ì‘ì„±
@FeignClient(name = "stores", configuration = FooConfiguration.class, url = "${feign.url}")
public interface StoreClient {
    @RequestMapping(method = RequestMethod.GET, value = "/stores")
    List<Store> getStores();

    @RequestMapping(method = RequestMethod.GET, value = "/stores")
    Page<Store> getStores(Pageable pageable);

    @RequestMapping(method = RequestMethod.POST, value = "/stores/{storeId}", consumes = "application/json")
    Store update(@PathVariable("storeId") Long storeId, Store store);
}
 

- @feignClient ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ feignì„ ì‚¬ìš©í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¼ê³  ì•Œë ¤ì¤ë‹ˆë‹¤.

- configuration ì˜µì…˜ì„ í†µí•´ defaultì„¤ì • ê°’ì„ overrideë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- url ì˜µì…˜ì„ í†µí•´ ë¶ˆëŸ¬ì˜¬ urlì„ ì…‹íŒ…í•´ì¤ë‹ˆë‹¤.

4. ì„œë¹„ìŠ¤ ì‘ì„±
@Service
public class StoreService {
    @Autowired
    StoreClient storeClient;

    public List<Store> getStores() {
        return storeClient.getStores();
    }
}
- @Autowiredë¥¼ í†µí•´ clinetë¥¼ ì˜ì¡´ì„± ì£¼ì…ì„ í•´ì¤ë‹ˆë‹¤.

- getSotres()ë¥¼ í˜¸ì¶œí•˜ì—¬ feignClientë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.

 